(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{437:function(t,e){},443:function(t,e,n){"use strict";n.r(e);var r=n(6),o=n(440),c=(n(41),n(300),n(37),n(56),n(132),n(1)),l=n(441),m=c.a.extend({data:function(){return{streamer:null,chat:null,messages:[]}},created:function(){this.streamer=this.$route.query.streamer,this.streamer||this.$router.push("/"),this.chat=new l.a({}),this.createWebsocket()},methods:{parseMessageEmotes:function(t,e){e=e.sort((function(a,b){return b.start-a.start}));var n=[{type:"text",message:t}];return this.applyEmotes(n,e)},applyEmotes:function(t,e){if(0===e.length)return t.filter((function(t){return!("text"===t.type&&""===t.message)}));var n=e.shift(),r=t.shift(),c=r.message.substring(0,n.start),l=r.message.substring(n.end+1);return this.applyEmotes([{type:"text",message:c},{type:"emote",id:n.id},{type:"text",message:l}].concat(Object(o.a)(t)),e)},createWebsocket:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.chat)||void 0===n?void 0:n.connect();case 2:return e.next=4,null===(r=t.chat)||void 0===r?void 0:r.join("#".concat(t.streamer));case 4:null===(c=t.chat)||void 0===c||c.on(l.b.PRIVATE_MESSAGE,(function(e){var n=e.message,r=e.tags,c=r.emotes;t.messages=[{index:t.messages.length,author:r.displayName,color:r.color,parts:t.parseMessageEmotes(n,c)}].concat(Object(o.a)(t.messages))}));case 5:case"end":return e.stop()}}),e)})))()}},destroyed:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.chat)||void 0===n?void 0:n.disconnect();case 2:case"end":return e.stop()}}),e)})))()}}),h=n(39),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-8 mx-16 lg:mx-16"},[n("h1",{staticClass:"text-xl"},[n("span",{staticClass:"font-semibold"},[t._v(t._s(t.streamer))]),t._v("'s chat\n  ")]),t._v(" "),n("ul",t._l(t.messages,(function(e){return n("li",{key:e.index},[n("span",{staticClass:"font-bold",style:{color:e.color}},[t._v("\n        "+t._s(e.author)+":\n      ")]),t._v(" "),t._l(e.parts,(function(e,r){return n("span",{key:r},["text"===e.type?n("span",[t._v(t._s(e.message))]):t._e(),t._v(" "),"emote"===e.type?n("img",{staticClass:"inline",attrs:{src:"https://static-cdn.jtvnw.net/emoticons/v2/"+e.id+"/default/light/1.0"}}):t._e()])}))],2)})),0)])}),[],!1,null,null,null);e.default=component.exports}}]);