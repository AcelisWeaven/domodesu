(window.webpackJsonp=window.webpackJsonp||[]).push([[8,6],{282:function(t,e){},287:function(t,e,n){"use strict";var r=n(2),l=n(74).find,o=n(131),c="find",d=!0;c in[]&&Array(1).find((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},314:function(t,e,n){"use strict";n.r(e);var r=n(257),l=n(6),o=(n(43),n(57),n(72),n(11),n(40),n(55),n(29),n(34),n(37),n(33),n(287),n(1)),c=n(288);n(41);var d=o.a.extend({data:function(){return{followedStreams:[],followedUsers:[],hasFetchedFollowedUsers:!1,profilePictures:[],api:null,isSyncing:!1}},created:function(){var t=this.$auth.strategy.token.get().replace("Bearer ",""),e=new c.c({token:t,clientId:"j4v0ozgahoc5t71kit5w8scuj5paw6"});this.api=e.api,this.refresh()},methods:{fetchFollowed:function(){var t=this,cursor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.hasFetchedFollowedUsers?Promise.resolve(this.followedUsers):new Promise((function(e,n){var o,c;null===(o=t.api)||void 0===o||o.get("users/follows",{search:{from_id:null===(c=t.$auth.user)||void 0===c?void 0:c.id,after:cursor}}).then(function(){var n=Object(l.a)(regeneratorRuntime.mark((function n(l){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=l.data.map((function(u){return{id:u.toId,isLive:!1,displayName:u.toName,viewerCount:0}})),!(c=l.pagination.cursor)){n.next=11;break}return n.t0=[],n.t1=Object(r.a)(o),n.t2=r.a,n.next=8,t.fetchFollowed(c);case 8:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),o=n.t0.concat.call(n.t0,n.t1,n.t4);case 11:t.hasFetchedFollowedUsers=!0,e(o);case 13:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch(n)}))},fetchStreams:function(){var t=this,cursor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(e,n){var o,c;null===(o=t.api)||void 0===o||o.get("streams/followed",{search:{user_id:null===(c=t.$auth.user)||void 0===c?void 0:c.id,after:cursor}}).then(function(){var n=Object(l.a)(regeneratorRuntime.mark((function n(l){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=l.data.map((function(s){return{id:s.userId,thumbnail:s.thumbnailUrl.replace("{width}","404").replace("{height}","227"),isLive:!0,displayName:s.userName,viewerCount:s.viewerCount}})),!(c=l.pagination.cursor)){n.next=11;break}return n.t0=[],n.t1=Object(r.a)(o),n.t2=r.a,n.next=8,t.fetchStreams(c);case 8:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),o=n.t0.concat.call(n.t0,n.t1,n.t4);case 11:e(o);case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch(n)}))},refresh:function(){var t=this;this.isSyncing||(this.isSyncing=!0,Promise.all([this.fetchFollowed().then((function(e){t.followedUsers=e,t.refreshProfilePictures()})),this.fetchStreams().then((function(e){t.followedStreams=e}))]).finally((function(){t.isSyncing=!1})))},refreshProfilePictures:function(){var t=this,e=this.followedUsers.map((function(t){return t.id})).filter((function(e){return!t.profilePictures.some((function(p){return p.id===e}))}));0!==e.length&&function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],r=0;r<Math.ceil(t.length/e);r+=1){var l=r*e,o=l+e;n.push(t.slice(l,o))}return n}(e,100).forEach((function(e){var n;null===(n=t.api)||void 0===n||n.get("users",{search:{id:e}}).then((function(e){e.data.forEach((function(e){t.profilePictures.push({id:e.id,picture:e.profileImageUrl.replace("300x300","70x70")})}))}))}))},getUserPicture:function(t){var e;return null===(e=this.profilePictures.find((function(p){return p.id===t})))||void 0===e?void 0:e.picture}},computed:{filteredFollowedUsers:function(){var t=this;return this.followedUsers.filter((function(u){return!t.followedStreams.some((function(s){return s.displayName===u.toName}))}))},self:function(){return this.$auth.user}}}),f=n(39),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("div",{staticClass:"text-center mb-4"},[n("div",{staticClass:"text-xl"},[t._v("Select a channel")]),t._v(" "),n("div",{staticClass:"font-bold text-sm tracking-wider uppercase"},[t._v("\n        "+t._s(t.followedStreams.length)+" online\n        "),n("button",{staticClass:"hover:text-purple-700",on:{click:t.refresh}},[n("font-awesome-icon",{class:{"fa-spin":t.isSyncing,"text-purple-500":t.isSyncing},attrs:{icon:"sync-alt"}})],1),t._v("\n        / "+t._s(t.filteredFollowedUsers.length)+" offline\n      ")])]),t._v(" "),n("div",{staticClass:"\n        grid\n        gap-4\n        grid-cols-1\n        sm:grid-cols-3\n        md:grid-cols-4\n        lg:grid-cols-5\n        my-8\n      "},[n("nuxt-link",{staticClass:"\n          flex flex-row\n          items-center\n          rounded-lg\n          shadow-lg\n          overflow-hidden\n          cursor-pointer\n          hover:opacity-80\n        ",attrs:{to:"/monitor?streamer="+t.self.name}},[n("img",{staticClass:"inline h-16 w-16",attrs:{src:t.self.profilePicture}}),t._v(" "),n("div",{staticClass:"my-2 mx-4"},[n("div",{staticClass:"text-xl font-semibold"},[t._v("\n            "+t._s(t.self.name)+"\n            "),n("span",{staticClass:"\n                text-xs\n                bg-gray-200\n                text-gray-500\n                px-3\n                py-1\n                rounded-md\n                uppercase\n                tracking-wider\n              "},[t._v("\n              you\n            ")])])])])],1),t._v(" "),n("div",{staticClass:"\n        grid\n        gap-4\n        grid-cols-1\n        sm:grid-cols-3\n        md:grid-cols-4\n        lg:grid-cols-5\n      "},t._l(t.followedStreams,(function(e){return n("nuxt-link",{key:e.displayName,staticClass:"\n          flex flex-col\n          items-center\n          rounded-lg\n          shadow-lg\n          overflow-hidden\n          cursor-pointer\n          hover:opacity-80\n        ",attrs:{to:"/monitor?streamer="+e.displayName}},[e.thumbnail?n("img",{staticClass:"w-full",attrs:{src:e.thumbnail,width:"404",height:"227"}}):t._e(),t._v(" "),n("div",{staticClass:"flex items-center w-full"},[t.getUserPicture(e.id)?n("img",{staticClass:"mr-4 inline-flex flex-grow-0 h-16 w-16 bg-gray-100",attrs:{src:t.getUserPicture(e.id)}}):n("span",{staticClass:"mr-4 inline-flex h-16 w-16 bg-gray-100"}),t._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",[e.isLive?n("span",{staticClass:"inline-flex relative h-3 w-3 mr-1"},[n("span",{staticClass:"\n                    animate-ping\n                    absolute\n                    inline-flex\n                    h-full\n                    w-full\n                    rounded-full\n                    bg-red-400\n                    opacity-75\n                  "}),t._v(" "),n("span",{staticClass:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]):t._e(),t._v(" "),n("span",{staticClass:"text-xl font-semibold"},[t._v("\n                "+t._s(e.displayName)+"\n              ")])]),t._v(" "),e.viewerCount>0?n("span",{staticClass:"font-light"},[t._v("\n              "+t._s(e.viewerCount)+" viewers\n            ")]):t._e()])])])})),1)]),t._v(" "),n("div",{staticClass:"my-8"},[n("div",{staticClass:"\n        grid\n        gap-4\n        grid-cols-1\n        sm:grid-cols-2\n        md:grid-cols-3\n        lg:grid-cols-4\n        xl:grid-cols-5\n      "},t._l(t.filteredFollowedUsers,(function(e){return n("nuxt-link",{key:e.displayName,staticClass:"\n          flex flex-row\n          items-center\n          rounded-lg\n          shadow-lg\n          overflow-hidden\n          cursor-pointer\n          hover:opacity-80\n        ",attrs:{to:"/monitor?streamer="+e.displayName}},[t.getUserPicture(e.id)?n("img",{staticClass:"inline h-16 w-16",attrs:{src:t.getUserPicture(e.id)}}):n("div",{staticClass:"h-16 w-16 bg-gray-100"}),t._v(" "),n("div",{staticClass:"my-2 mx-4"},[n("span",{staticClass:"text-xl font-semibold"},[t._v("\n            "+t._s(e.displayName)+"\n          ")])])])})),1)])])}),[],!1,null,null,null);e.default=component.exports},456:function(t,e,n){"use strict";n.r(e);var r=n(1).a.extend({}),l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-8 mx-16 lg:mx-16"},[n("h1",{staticClass:"text-xl"},[t._v("\n    Welcome,\n    "),n("img",{staticClass:"h-8 w-8 inline rounded-full",attrs:{src:t.$auth.user.profilePicture,alt:t.$auth.user.name}}),t._v("\n    "+t._s(t.$auth.user.name)+"\n  ")]),t._v(" "),n("button",{staticClass:"\n      bg-purple-500\n      hover:bg-purple-700\n      text-white\n      font-bold\n      py-1\n      px-2\n      my-4\n      rounded\n      cursor-pointer\n    ",on:{click:function(e){t.$auth.logout()&&t.$router.push("/login")}}},[t._v("\n    Logout\n  ")]),t._v(" "),n("select-followed")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SelectFollowed:n(314).default})}}]);