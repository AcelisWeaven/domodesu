(window.webpackJsonp=window.webpackJsonp||[]).push([[7,3],{273:function(t,e){},275:function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){"function"==typeof t.scroll?t.scroll({top:t.scrollHeight,behavior:e?"smooth":"instant"}):t.scrollTop=t.scrollHeight},e={bind:function(e,n){var r=!1;e.addEventListener("scroll",(function(t){(r=e.scrollTop+e.clientHeight+1<e.scrollHeight)&&0===e.scrollTop&&e.dispatchEvent(new Event("v-chat-scroll-top-reached"))})),new MutationObserver((function(o){var c=n.value||{};if(!1!==c.enabled){var l=!1===c.always&&r,f=o[o.length-1].addedNodes.length,h=o[o.length-1].removedNodes.length;if(c.scrollonremoved){if(l||1!=f&&1!=h)return}else if(l||1!=f)return;var v=c.smooth;!f&&1===h&&c.scrollonremoved&&"smoothonremoved"in c&&(v=c.smoothonremoved),t(e,v)}})).observe(e,{childList:!0,subtree:!0})},inserted:function(e,n){var r=n.value||{};t(e,!r.notSmoothOnInit&&r.smooth)}},n={install:function(t,n){t.directive("chat-scroll",e)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(n),n}()},305:function(t,e,n){"use strict";n.r(e);n(187);var r=n(1),o=n(275),c=n.n(o);r.a.use(c.a);var l=r.a.extend({data:function(){return{messages:[]}},created:function(){var t=this;this.$nuxt.$on("message",(function(e){t.messages.push(e),t.messages.splice(0,t.messages.length-100)}))}}),f=n(39),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!1,scrollonremoved:!0},expression:"{\n    always: false,\n    scrollonremoved: true,\n  }"}],staticClass:"flex-grow max-h-full overflow-y-auto"},t._l(t.messages,(function(e){return n("li",{key:e.id},[n("span",{staticClass:"font-bold",style:{color:e.color}},[t._v("\n      "+t._s(e.author)+":\n    ")]),t._v(" "),t._l(e.parts,(function(e,r){return n("span",{key:r},["text"===e.type?n("span",[t._v(t._s(e.message))]):t._e(),t._v(" "),"emote"===e.type?n("img",{staticClass:"inline",attrs:{src:"https://static-cdn.jtvnw.net/emoticons/v2/"+e.id+"/default/light/1.0",width:"28",height:"28"}}):t._e()])}))],2)})),0)}),[],!1,null,null,null);e.default=component.exports},306:function(t,e,n){"use strict";var r=n(2),o=n(43),c=n(22),l=n(15),f=n(9),h=n(4),v=n(307),d=n(132),m=n(308),x=n(309),w=n(74),y=n(310),_=[],E=_.sort,C=h((function(){_.sort(void 0)})),k=h((function(){_.sort(null)})),$=d("sort"),j=!h((function(){if(w)return w<70;if(!(m&&m>3)){if(x)return!0;if(y)return y<603;var code,t,e,n,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)_.push({k:t+n,v:e})}for(_.sort((function(a,b){return b.v-a.v})),n=0;n<_.length;n++)t=_[n].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));r({target:"Array",proto:!0,forced:C||!k||!$||!j},{sort:function(t){void 0!==t&&o(t);var e=c(this);if(j)return void 0===t?E.call(e):E.call(e,t);var n,r,h=[],d=l(e.length);for(r=0;r<d;r++)r in e&&h.push(e[r]);for(n=(h=v(h,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:f(e)>f(n)?1:-1}}(t))).length,r=0;r<n;)e[r]=h[r++];for(;r<d;)delete e[r++];return e}})},307:function(t,e){var n=Math.floor,r=function(t,e){var l=t.length,f=n(l/2);return l<8?o(t,e):c(r(t.slice(0,f),e),r(t.slice(f),e),e)},o=function(t,e){for(var element,n,r=t.length,i=1;i<r;){for(n=i,element=t[i];n&&e(t[n-1],element)>0;)t[n]=t[--n];n!==i++&&(t[n]=element)}return t},c=function(t,e,n){for(var r=t.length,o=e.length,c=0,l=0,f=[];c<r||l<o;)c<r&&l<o?f.push(n(t[c],e[l])<=0?t[c++]:e[l++]):f.push(c<r?t[c++]:e[l++]);return f};t.exports=r},308:function(t,e,n){var r=n(71).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},309:function(t,e,n){var r=n(71);t.exports=/MSIE|Trident/.test(r)},310:function(t,e,n){var r=n(71).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},446:function(t,e,n){"use strict";n.r(e);var r=n(6),o=n(277),c=(n(40),n(306),n(37),n(55),n(133),n(1)),l=n(278),f=c.a.extend({data:function(){return{streamer:null,chat:null}},created:function(){this.streamer=this.$route.query.streamer,this.streamer||this.$router.push("/"),this.chat=new l.a({}),this.createWebsocket()},methods:{parseMessageEmotes:function(t,e){e=e.sort((function(a,b){return b.start-a.start}));var n=[{type:"text",message:t}];return this.applyEmotes(n,e)},applyEmotes:function(t,e){if(0===e.length)return t.filter((function(t){return!("text"===t.type&&""===t.message)}));var n=e.shift(),r=t.shift(),c=r.message.substring(0,n.start),l=r.message.substring(n.end+1);return this.applyEmotes([{type:"text",message:c},{type:"emote",id:n.id},{type:"text",message:l}].concat(Object(o.a)(t)),e)},createWebsocket:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.chat)||void 0===n?void 0:n.connect();case 2:return e.next=4,null===(r=t.chat)||void 0===r?void 0:r.join("#".concat(t.streamer));case 4:null===(o=t.chat)||void 0===o||o.on(l.b.PRIVATE_MESSAGE,(function(e){var text=e.message,n=e.tags,r=n.emotes,o={id:n.id,author:n.displayName,color:n.color,parts:t.parseMessageEmotes(text,r)};t.$nuxt.$emit("message",o)}));case 5:case"end":return e.stop()}}),e)})))()}},destroyed:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.chat)||void 0===n?void 0:n.disconnect();case 2:case"end":return e.stop()}}),e)})))()}}),h=n(39),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col h-screen max-h-full pt-8 px-16 lg:px-16"},[n("div",[n("h1",{staticClass:"text-xl"},[n("span",{staticClass:"font-semibold"},[t._v(t._s(t.streamer))]),t._v("'s chat\n      "),n("a",{staticClass:"text-sm text-purple-700",attrs:{href:"https://twitch.tv/"+t.streamer.toLowerCase(),target:"_blank"}},[t._v("View on Twitch")])])]),t._v(" "),n("chat",{staticClass:"flex-grow"})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Chat:n(305).default})}}]);