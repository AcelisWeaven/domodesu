(window.webpackJsonp=window.webpackJsonp||[]).push([[4,3],{256:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(98);var l=n(131),o=n(73);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(l.a)(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},275:function(e,t,n){"use strict";var r=n(2),l=n(72).find,o=n(132),c="find",d=!0;c in[]&&Array(1).find((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),o(c)},302:function(e,t,n){"use strict";n.r(t);var r=n(256),l=(n(56),n(11),n(29),n(34),n(187),n(40),n(57),n(74),n(37),n(55),n(33),n(275),n(1).a.extend({data:function(){return{followedStreams:[],followedUsers:[],refreshInterval:null,profilePictures:[]}},created:function(){var e=this;this.refreshInterval=window.setInterval((function(){e.refresh()}),6e4),this.refresh()},destroyed:function(){null!==this.refreshInterval&&window.clearInterval(this.refreshInterval)},methods:{refresh:function(){var e,t=this,n=new URL("https://api.twitch.tv/helix/streams/followed");n.searchParams.append("user_id",null===(e=this.$auth.user)||void 0===e?void 0:e.id),this.$axios.$get(n.href).then((function(e){var n;t.followedStreams=e.data.map((function(s){return{id:s.user_id,thumbnail:s.thumbnail_url.replace("{width}","404").replace("{height}","227"),isLive:!0,displayName:s.user_name,viewerCount:s.viewer_count}}));var r=new URL("https://api.twitch.tv/helix/users/follows");r.searchParams.append("from_id",null===(n=t.$auth.user)||void 0===n?void 0:n.id),t.$axios.$get(r.href).then((function(e){t.followedUsers=e.data.filter((function(u){return!t.followedStreams.some((function(s){return s.displayName===u.to_name}))})).map((function(u){return{id:u.to_id,isLive:!1,displayName:u.to_name,viewerCount:0}})),t.refreshProfilePictures()}))}))},refreshProfilePictures:function(){var e=this,t=[].concat(Object(r.a)(this.followedStreams),Object(r.a)(this.followedUsers)).map((function(e){return e.id})).filter((function(t){return!e.profilePictures.some((function(p){return p.id===t}))})),n=new URL("https://api.twitch.tv/helix/users");t.forEach((function(e){n.searchParams.append("id",e)})),this.$axios.$get(n.href).then((function(t){t.data.forEach((function(t){e.profilePictures.push({id:t.id,picture:t.profile_image_url})}))}))},getUserPicture:function(e){var t;return null===(t=this.profilePictures.find((function(p){return p.id===e})))||void 0===t?void 0:t.picture}}})),o=n(39),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",[e._v("Select a live channel")]),e._v(" "),n("div",{staticClass:"\n        grid\n        gap-4\n        grid-cols-1\n        sm:grid-cols-2\n        md:grid-cols-3\n        lg:grid-cols-4\n      "},e._l(e.followedStreams,(function(t){return n("nuxt-link",{key:t.displayName,staticClass:"\n          flex flex-col\n          items-center\n          rounded-lg\n          shadow-lg\n          overflow-hidden\n          cursor-pointer\n          hover:opacity-80\n        ",attrs:{to:"/monitor?streamer="+t.displayName}},[t.thumbnail?n("img",{staticClass:"w-full",attrs:{src:t.thumbnail,width:"404",height:"227"}}):e._e(),e._v(" "),n("div",{staticClass:"flex items-center w-full"},[e.getUserPicture(t.id)?n("img",{staticClass:"mr-4 inline-flex flex-grow-0 h-16 w-16 bg-gray-100",attrs:{src:e.getUserPicture(t.id)}}):n("span",{staticClass:"mr-4 inline-flex h-16 w-16 bg-gray-100"}),e._v(" "),n("div",{staticClass:"flex flex-col"},[n("div",[t.isLive?n("span",{staticClass:"inline-flex relative h-3 w-3 mr-1"},[n("span",{staticClass:"\n                    animate-ping\n                    absolute\n                    inline-flex\n                    h-full\n                    w-full\n                    rounded-full\n                    bg-red-400\n                    opacity-75\n                  "}),e._v(" "),n("span",{staticClass:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]):e._e(),e._v(" "),n("span",{staticClass:"text-xl font-semibold"},[e._v("\n                "+e._s(t.displayName)+"\n              ")])]),e._v(" "),t.viewerCount>0?n("span",{staticClass:"font-light"},[e._v("\n              "+e._s(t.viewerCount)+" viewers\n            ")]):e._e()])])])})),1)]),e._v(" "),n("div",{staticClass:"my-8"},[n("div",{staticClass:"\n        grid\n        gap-4\n        grid-cols-1\n        md:grid-cols-2\n        lg:grid-cols-3\n        xl:grid-cols-4\n      "},e._l(e.followedUsers,(function(t){return n("nuxt-link",{key:t.displayName,staticClass:"\n          flex flex-row\n          items-center\n          rounded-lg\n          shadow-lg\n          overflow-hidden\n          cursor-pointer\n          hover:opacity-80\n        ",attrs:{to:"/monitor?streamer="+t.displayName}},[e.getUserPicture(t.id)?n("img",{staticClass:"inline h-16 w-16",attrs:{src:e.getUserPicture(t.id)}}):n("div",{staticClass:"h-16 w-16 bg-gray-100"}),e._v(" "),n("div",{staticClass:"my-2 mx-4"},[n("span",{staticClass:"text-xl font-semibold"},[e._v("\n            "+e._s(t.displayName)+"\n          ")])])])})),1)])])}),[],!1,null,null,null);t.default=component.exports},446:function(e,t,n){"use strict";n.r(t);var r=n(1).a.extend({}),l=n(39),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-8 mx-16 lg:mx-16"},[n("h1",{staticClass:"text-xl"},[e._v("\n    Welcome,\n    "),n("img",{staticClass:"h-8 w-8 inline rounded-full",attrs:{src:e.$auth.user.profilePicture,alt:e.$auth.user.name}}),e._v("\n    "+e._s(e.$auth.user.name)+"\n  ")]),e._v(" "),n("button",{staticClass:"\n      bg-purple-500\n      hover:bg-purple-700\n      text-white\n      font-bold\n      py-1\n      px-2\n      my-4\n      rounded\n      cursor-pointer\n    ",on:{click:function(t){e.$auth.logout()&&e.$router.push("/login")}}},[e._v("\n    Logout\n  ")]),e._v(" "),n("select-followed")],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SelectFollowed:n(302).default})}}]);